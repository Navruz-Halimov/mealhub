<i18n>
{
  "en": {
    "restourantLabel": "Restourant",
    "commentLabel": "Comment",
    "reserveCommentLabel": "Reservation comment",
    "dishCommentLabel": "Dishes comment",

    "myordersCrumb": "My orders",
    "myhistoryCrumb": "History",

    "cancel5Min": "Attention! If you change your mind and do not want to place an order, you have 5 minutes to cancel the order with a refund.",

    "goeatType": "Go&Eat",
    "deliveryType": "Delivery",
    "pickupType": "Takeaway",
    "preorderType": "Pre-order",
    "reservetableType": "Booking",

    "ahtung": "Attention!",
    "cancelm1": "If the order is canceled at this stage",
    "cancelm2": "money will not be returned!",
    "selectCancelCause": "If you want to cancel the order, please indicate the reason for the cancellation:",
    "c_save": "If you want to save this order, click the \"Save order \" ",

    "save_order": "Keep it",
    "cancel_order": "Cancel the order",

    "var1": "Changed plans",
    "var2": "I don't have time",
    "var3": "I'll go somewhere else",
    "varYour": "Another reason",
    "varYourPlace": "Enter here the number of hall",

    "place": "availible",
    "noplace": "unavailible",

    "title": "Orders history",
    "emptyhistory": "Your order history will be displayed here",
    "popupErrorMessage": "Fill the full field",
    "payOrder": "Pay",
    "chooseDishes": "Choose dishes",

    "repeatOrder": "Repeat",
    "cancelOrder": "Cancel",
    "resultLabel": "Result",

    "guestLabel": "Guest",
    "dishCountLabel": "Dish count",
    "dishCountEnding": " ",
    "priceLabel": "Price",
    "totalPriceLabel": "Total price",
    "currentPriceLabel": "Current price({n}%)",
    "timeMenuLabel": "Ready time",
    "chooseTables": "Choose tables",
    "reserveTimeMenuLabel": "Ready time",
    "tableNumbers": "Tables №",
    "occasion": "Event",

    "transactionDetailsId": "Transaction",
    "transactionDetailsMethod": "Method",
    "transactionDetailsStatus": "Status",
    "transactionDetailsDate": "Date",

    "buildWay": "Find the way",
    "someDishesCouldNotExist": "Attention! When ordering again, the restaurant may not have any dishes.",

    "reviewsLabel": "Reviews",
    "emptyCart": "Your cart is empty",
    "emptyCart1": "Your cart is empty. You have 20 minutes",
    "emptyCart2": "to make a choise",
    "emptyCart3": "Your cart is empty",
    "emptyCart4": "Your basket is empty. You can",
    "emptyCart5": "choose dishes here",
    "reserveEmptyCart": "Your cart is empty, but in 24 hours you can",

  "linkCopied": "Routing link copied",
  "linkCopiedError": "An error occurred while trying to share a way",
  "loadingText": "loading",

  "pendingPayment": "Wait for payment system response",

    "firstDishReadyIn1": "The first dish of the order will be ready in about",
    "anotherDishWill": "The rest of the dishes will be served as they are ready.",
    "readyTime": "Expected ready time",
    "deliveryTime": "Estimated delivery time",
    "firstDishReadyIn2": "Expected time to prepare the first dish:",
    "chooseAndPay20": "You have 20 minutes to select and pay for your meals.",
    "canChooseAndPay": "You can select and pay for your meals.",
    "ifYoureReadyPayAndGo": "If you have finished choosing dishes, please pay for the order and proceed to building a route",
    "ifYoureReadyPay": "If you have finished choosing dishes, please pay for the order",
    "youCanChooseMore1": "You can also",
    "youCanChooseMore2": "Continue food selection",
    "waitForAnManagerText": "Wait for booking confirmation to continue. Maximum waiting time 3 minutes.",
    "whatsOnTimer": "* How much time is left on the timer / total time",
    "reserveWaitingManager": "Wait reservation approve to continue. Max waiting time is 60 min",
    "reserveCancelWarning": "Cancel reserve with refund you can call no longer than {n} days before order date",
    "chooseDishesRecommendation": "We recommend to choose dishes in 24 hours to avoid long cooking time at the restaurant.",
    "preorderEditCancelWarning": "You can edit or make refund no longer than {n} days before order date.",
    "waitOrder": "Wait order completion.",
    "reserveLastWarning": "Warning! In the end of 20 minutes after order date, if didn't come, we will refuse reserve.",
    "minuteLabel": "min.",
    "more": "more",

    "placeholderComment": "Leave your comment about this dish here, no more than 1000 letters.",

    "popupCancelMessage": "Are you sure you want to cancel order?",
    "popupSuccessMessage": "Successfully canceled"
  },
  "ru": {
    "restourantLabel": "Ресторан",
    "commentLabel": "Комментарий",
    "reserveCommentLabel": "Комментарий к брони",
    "dishCommentLabel": "Комментарий к блюдам",

    "myordersCrumb": "Мои заказы",
    "myhistoryCrumb": "История заказов",

    "cancel5Min": "Внимание! Если Вы передумали и не хотите делать заказ, у Вас есть 5 минут на отмену заказа с возвратом денежных средств.",

    "goeatType": "Go&Eat",
    "deliveryType": "Доставка",
    "pickupType": "Еда на вынос",
    "preorderType": "Предзаказ",
    "reservetableType": "Бронь стола",

    "ahtung": "Внимание!",
    "cancelm1": "При отмене заказа на данном этапе",
    "cancelm2": "денежные средства возвращены не будут!",
    "selectCancelCause": "Если Вы хотите отменить заказ, пожалуйста, укажите причину отмены:",
    "selectCancelCause1": "Если Вы хотите отменить заказ, пожалуйста, ",
    "selectCancelCause2": "укажите причину отмены",
    "c_save": "Если Вы хотите сохранить данный заказ, нажмите кнопку \"Сохранить заказ\" ",

    "save_order": "Сохранить заказ",
    "cancel_order": "Отменить заказ",

    "var1": "Поменялись планы",
    "var2": "Не успеваю",
    "var3": "Пойду в другое место",
    "varYour": "Ваш вариант",
    "varYourPlace": "Напишите, пожалуйста, ваш вариант",

    "place": "Доступны",
    "noplace": "нет",

    "title": "История заказов",
    "emptyhistory": "Здесь будет отображена история Ваших заказов",
    "popupErrorMessage": "Заполните все поля",
    "payOrder": "Оплатить",
    "chooseDishes": "Выбрать блюда",
    "chooseTables": "Выбрать столы",

    "repeatOrder": "Повторить заказ",
    "cancelOrder": "Отменить",
    "resultLabel": "Результаты поиска",

    "guestLabel": "Количество людей",
    "dishCountLabel": "Количество блюд",
    "dishCountEnding":"шт.",
    "priceLabel": "К оплате",
    "totalPriceLabel": "Всего к оплате",
    "currentPriceLabel": "К оплате сейчас ({n}%)",
    "timeMenuLabel": "Время готовности",
    "reserveTimeMenuLabel": "Время проведения",
    "tableNumbers": "Столы №",
    "occasion": "Мероприятие",

    "transactionDetailsId": "Транзакция",
    "transactionDetailsMethod": "Метод",
    "transactionDetailsStatus": "Статус",
    "transactionDetailsDate": "Дата",

    "buildWay": "Проложить маршрут",
    "someDishesCouldNotExist": "Внимание! При повторном заказе в заведении могут отсутствовать блюда.",

    "reviewsLabel": "Отзывы",
    "emptyCart": "В вашей корзине отсутствуют блюда.",
    "emptyCart1": "Корзина пуста. Но в течении 20 минут Вы можете",
    "emptyCart2": "выбрать блюда",
    "emptyCart3": "В Вашей корзине отсутствуют блюда",
    "emptyCart4": "Ваша корзина пуста. Вы можете",
    "emptyCart5": "выбрать блюда тут",
    "reserveEmptyCart": "Ваша корзина пуста. Но в течении 24 часов Вы можете",

    "linkCopied": "Ссылка на маршрут скопирована",
    "linkCopiedError": "Ошибка при попытке поделиться маршрутом",
    "loadingText": "Загрузка",

    "pendingPayment": "Ожидание ответа от платежной системы",

    "firstDishReadyIn1" : "Первое блюда Вашего заказа будет готово примерно через",
    "anotherDishWill" : "Остальные блюда будут подаваться по мере готовности.",
    "readyTime" : "Ожидаемое время готовности",
    "deliveryTime" : "Ожидаемое время доставки",
    "firstDishReadyIn2" : "Ожидаемое время приготовления первого блюда:",
    "chooseAndPay20" : "У Вас есть 20 минут на то, чтобы выбрать и оплатить блюда.",
    "canChooseAndPay" : "Можете выбрать и оплатить блюда.",
    "ifYoureReadyPayAndGo" : "Если вы закончили выбирать блюда, пожалуйста, оплатите заказ и переходите к построению маршрута",
    "ifYoureReadyPay" : "Если вы закончили выбирать блюда, пожалуйста, оплатите заказ",
    "youCanChooseMore1" : "Также можете",
    "youCanChooseMore2" : "продолжить выбор блюд",
    "waitForAnManagerText" : "Ожидайте подтверждения брони стола для продолжения. Максимальное время ожидания 3 мин.",
    "whatsOnTimer" : "*На таймере сколько осталось/общее время",
    "reserveWaitingManager": "Ожидайте подтверждение брони стола для продолжения. Максимальное время ожидания 60 мин",
    "reserveCancelWarning": "Отменить бронь с возвратом средств вы можете не позднее {n} суток до указанной Вами даты",
    "chooseDishesRecommendation": "Рекомендуем выбрать блюда в течении 24 часов, во избежание длительного ожидания их приготовления в ресторане в день мероприятия.",
    "preorderEditCancelWarning": "Отредактировать, а также отменить предзаказ с вазвратом денежных средств вы можете не позднее {n} суток до указанной Вами даты.",
    "waitOrder": "Ожидайте выполнения заказа.",
    "reserveLastWarning": "Внимание! По истечении 20 минут после наступления указанного времени, если Вы не пришли, бронь аннулируется.",
    "minuteLabel" : "мин.",
    "more": "еще",

    "placeholderComment": "Коментарий к предзаказу блюда (не более 1000 символов)",

    "popupCancelMessage": "Вы уверены, что хотите отменить заказ?",
    "popupSuccessMessage": "Успешно отменено"
  }
}
</i18n>

<template>
  <section class="order">
    <template v-if="item && item.id">
      <div class="about_head desktop">
        <div class="about_head_inliner">
          <p
            class="title cursor-pointer"
            @click="
              $router.push(
                localePath({ path: `/catering/${item.catering_id}` })
              )
            "
          >
            {{ $t('restourantLabel') }} {{ item.catering }}
          </p>
        </div>
        <div class="flex wide j_b">
          <p class="address">
            <img height="20" src="/icons/catering/new/point-green.svg">
            <span v-if="item.catering_address" class="wide text-left">
              {{ item.catering_address.street }}, д.{{
                item.catering_address.building
              }}, кор.{{ item.catering_address.section }},
              {{ item.catering_address.city }}
            </span>
          </p>

          <div
            class="order-rate flex a_c"
            @click="
              $router.push(
                localePath({ path: `/catering/${item.catering_id}/reviews` })
              )
            "
          >
            <b class="order-rate-count  mr-1 roboto">
              {{ parseFloat(item.rating || 0).toFixed(1) }}
            </b>
            <addition-stars :rate="+item.rating" />
            <p class="order-rate-review ml-1 mr-1 text-lg">
              {{ $t('reviewsLabel') }}:
              <span class="green">{{ item.reviewsCount || 123 }}</span>
            </p>
          </div>
        </div>
      </div>

      <!--mobile-->
      <div class="about_head mobile text-center">
        <div class="orders-back">
          <addition-back />
        </div>
        <p class="mb-1 green roboto text-xxl mt-3">
          <b>
            <span
              v-if="item.order_type === 'go_and_eat'"
            >{{ $t('goeatType') }},</span>
            <span
              v-if="item.order_type === 'delivery'"
            >{{ $t('deliveryType') }},</span>
            <span
              v-if="item.order_type === 'pickup'"
            >{{ $t('pickupType') }},</span>
            <span
              v-if="item.order_type === 'pre_order'"
            >{{ $t('preorderType') }},</span>
            <span
              v-if="item.order_type === 'reserve_table'"
            >{{ $t('reservetableType') }},</span>
            {{ orderUID(item.id) }}
          </b>
        </p>
        <p class="text-lg">
          {{ $t('restourantLabel') }} {{ item.catering }}
        </p>
        <p>
          <span v-if="item.catering_address" class="wide text-left text-lg">
            {{ item.catering_address.street }}, д.{{
              item.catering_address.building
            }}, кор.{{ item.catering_address.section }},
            {{ item.catering_address.city }}
          </span>
        </p>
        <div
          class="order-rate flex a_c j_c wide"
          @click="
            $router.push(
              localePath({ path: `/catering/${item.catering_id}/reviews` })
            )
          "
        >
          <b class="order-rate-count  mr-1 roboto text-lg">
            {{ parseFloat(item.rating || 0).toFixed(1) }}
          </b>
          <addition-stars :rate="+item.rating" />
          <p class="order-rate-review ml-1 mr-1 text-lg">
            {{ $t('reviewsLabel') }}:
            <span class="green">{{ item.reviewsCount || 123 }}</span>
          </p>
        </div>
        <div class="flex a_c j_c text-lg">
          <img
            class="top_footer-seats-icon mr-1"
            style="flex: 0 0 18px;"
            height="18"
            src="/icons/catering/booking-table-black.svg"
            alt=""
          >
          {{ $t('place') }}
        </div>
      </div>
      <div class="orders_item_form flex wide">
        <div class="wide flex col j_b h-9">
          <div>
            <div class="about_body desktop">
              <div class="roboto mr-1">
                <img
                  class="order-about-icon-cart"
                  src="/icons/catering/new/cart-green.svg"
                  alt=""
                >
                <span
                  class="myordersCrumb nowrap underline cursor-pointer"
                  @click="$router.push(localePath({ path: `/${type}/` }))"
                >{{ $t(`my${type}Crumb`) }}
                </span>
                <b>/
                  <span
                    v-if="item.order_type === 'go_and_eat'"
                  >{{ $t('goeatType') }},</span>
                  <span
                    v-if="item.order_type === 'delivery'"
                  >{{ $t('deliveryType') }},</span>
                  <span
                    v-if="item.order_type === 'pickup'"
                  >{{ $t('pickupType') }},</span>
                  <span
                    v-if="item.order_type === 'pre_order'"
                  >{{ $t('preorderType') }},</span>
                  <span
                    v-if="item.order_type === 'reserve_table'"
                  >{{ $t('reservetableType') }},</span>
                  {{ orderUID(item.id) }}
                </b>
              </div>
            </div>
            <div class="amsd1 order-details-block wide text-left">
              <p v-if="item.person_quantity">
                {{ $t('guestLabel') }}:
                <b class="roboto">{{ personQuantity }}</b>
              </p>

              <p v-if="isReserve || isPreorder">
                {{ $t('tableNumbers') }}: <b class="roboto">{{ tablesRow }}</b>
              </p>

              <p v-if="isReserve || isPreorder">
                {{ $t('occasion') }}: <b class="roboto">{{ occasion }}</b>
              </p>

              <p v-if="item.items_count || isPreorder">
                {{ $t('dishCountLabel') }}:
                <b
                  v-if="item.items_count"
                  class="roboto"
                >{{ item.items_count }} {{ $t('dishCountEnding') }}</b>
                <b v-else class="roboto">{{ '...' }}</b>
              </p>

              <p v-if="item.price || isReserve || isPreorder">
                {{ $t(isPreorder ? 'totalPriceLabel' : 'priceLabel') }}:
                <span class="roboto green nowrap text-bold">
                  <template
                    v-if="
                      (!isReserve && !isPreorder) ||
                        (reserveInfo && isTableReserved)
                    "
                  >
                    <span class="gilroy-bold">&#8381;</span> {{ orderPrice }}
                  </template>
                  <span v-else>...</span>
                </span>
              </p>

              <p v-if="isPreorder">
                {{ $tc('currentPriceLabel', minPreorderPercent) }}:
                <span class="roboto green nowrap text-bold">
                  <template
                    v-if="
                      (!isReserve && !isPreorder) ||
                        (reserveInfo && isTableReserved)
                    "
                  >
                    <span class="gilroy-bold">&#8381;</span>
                    {{ preorderPrepayment }}
                  </template>
                  <span v-else>...</span>
                </span>
              </p>

              <p v-if="readyDate(item) || isReserve || isPreorder">
                {{ orderReadyTimeText }}:
                <b class="roboto">{{ readyDatetime }}</b>
              </p>

              <p v-if="isReserve || isPreorder" class="w-7 mt-2">
                {{ $t(isReserve ? 'commentLabel' : 'reserveCommentLabel') }}:
                {{ openComment ? comment : shortComment(comment) }}
                <span
                  v-if="!openComment && comment.length >= 100"
                  class="underline green"
                  @click="openComment = true"
                >
                  {{ $t('more') }}
                </span>
                <span
                  v-if="openComment && comment.length >= 100"
                  class="underline green"
                  @click="openComment = false"
                >
                  {{ $t('less') }}
                </span>
              </p>

              <p v-if="isPreorder" class="w-7 mt-2">
                {{ $t('dishCommentLabel') }}:
                {{
                  openDishesComment
                    ? allDishesComment
                    : shortComment(allDishesComment)
                }}
                <span
                  v-if="!openDishesComment && allDishesComment.length >= 100"
                  class="underline green"
                  @click="openDishesComment = true"
                >
                  {{ $t('more') }}
                </span>
                <span
                  v-if="openDishesComment && allDishesComment.length >= 100"
                  class="underline green"
                  @click="openDishesComment = false"
                >
                  {{ $t('less') }}
                </span>
              </p>
            </div>
          </div>

          <div class="amsd1 text-lg">
            <template v-if="type === 'orders'">
              <div
                v-if="item.transaction_id"
                class="mb-2 w-9 mt-1e relative mb-4"
              >
                <p class="transaction">
                  {{ $t('transactionDetailsId') }}: №{{ item.transaction_id }};
                </p>
                <p>{{ $t('transactionDetailsMethod') }}: Yandex;</p>
                <p>{{ $t('transactionDetailsStatus') }}: {{ item.status }};</p>
                <p>{{ $t('transactionDetailsDate') }}: {{ transactionDate }}</p>

                <a
                  v-if="orderHasDownload(item)"
                  href="/images/billexample.png"
                  download
                  class="downloadcheckicon absol float-right cursor-pointer"
                >
                  <img
                    src="/icons/download_check1.svg"
                    height="26"
                    width="34"
                  >
                </a>
                <span
                  v-else
                  class="downloadcheckicon absol float-right disabled-check"
                >
                  <img
                    src="/icons/download_check2.svg"
                    height="26"
                    width="34"
                  >
                </span>
              </div>

              <div class="flex mt-2">
                <div class="order-inner-timer text-lg mr-2">
                  <order-timer v-if="orderHasTimer(item)" :item="item" />
                </div>
                <div :key="'timings' + systemTime" class="wide">
                  <p
                    v-if="orderTimingState(item) === 'cooking_timer'"
                    class="w-8"
                  >
                    {{ $t('firstDishReadyIn1') }}
                    {{ ~~(orderGoEatTimeFull(item) / 60) }}
                    {{ $t('minuteLabel') }}<br>
                    {{ $t('anotherDishWill') }}
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'pickup_timer'"
                    class="w-8"
                  >
                    {{ $t('readyTime') }}
                    {{ item.max_cook_time }} {{ $t('minuteLabel') }}<br>
                  </p>
                  <p
                    v-if="
                      orderTimingState(item) === 'delivery_timer' &&
                        item.timezone_info
                    "
                    class="w-8"
                  >
                    {{ $t('deliveryTime') }}
                    {{ ~~(orderDeliveryTimeFull(item) / 60) }}
                    {{ $t('minuteLabel') }}<br>
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'can_return_timer'"
                    class="w-8"
                  >
                    <span class="red">{{ $t('cancel5Min') }}</span><br>
                    <span
                      v-if="item.order_type === 'go_and_eat'"
                    >{{ $t('firstDishReadyIn2') }}
                      {{ ~~(orderGoEatTimeFull(item) / 60) }}
                      {{ $t('minuteLabel') }}</span>
                    <span
                      v-if="item.order_type === 'delivery'"
                    >{{ $t('deliveryTime') }}
                      {{ ~~(orderDeliveryTimeFull(item) / 60) }}
                      {{ $t('minuteLabel') }}</span>
                    <span
                      v-if="item.order_type === 'pickup'"
                    >{{ $t('readyTime') }} {{ item.max_cook_time }}
                      {{ $t('minuteLabel') }}</span>
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'wait_manager'"
                    class="red w-8"
                  >
                    {{ $t('waitForAnManagerText') }}
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'choose_dishes'"
                    class="w-8"
                  >
                    {{ $t('chooseAndPay20') }}
                  </p>
                  <p
                    v-if="
                      orderTimingState(item) === 'delivery_choose_dishes' ||
                        orderTimingState(item) === 'pickup_choose_dishes'
                    "
                    class="w-8"
                  >
                    {{ $t('canChooseAndPay') }}
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'pay_an_order'"
                    class="red w-8"
                  >
                    {{ $t('ifYoureReadyPayAndGo') }}<br>
                    {{ $t('youCanChooseMore1') }}
                    <span
                      class="green underline"
                      @click="
                        $router.push(
                          localePath({
                            path: `/catering/${item.catering_id}/menu`
                          })
                        )
                      "
                    >
                      {{ $t('youCanChooseMore2') }}
                    </span>
                  </p>
                  <p
                    v-if="
                      orderTimingState(item) === 'delivery_pay_an_order' ||
                        orderTimingState(item) === 'pickup_pay_an_order'
                    "
                    class="red w-8"
                  >
                    {{ $t('ifYoureReadyPay') }}<br>
                    {{ $t('youCanChooseMore1') }}
                    <span
                      class="green underline"
                      @click="
                        $router.push(
                          localePath({
                            path: `/catering/${item.catering_id}/menu`
                          })
                        )
                      "
                    >{{ $t('youCanChooseMore2') }}</span>
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'pending_payment'"
                    class="red w-8"
                  >
                    {{ $t('pendingPayment') }}
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'reserve_wait_manager'"
                    class="red w-8"
                  >
                    {{ $t('reserveWaitingManager') }}
                  </p>
                  <p
                    v-if="
                      orderTimingState(item) === 'reserve_choose_dishes' ||
                        orderTimingState(item) === 'reserve_cancel_time' ||
                        orderTimingState(item) === 'reserve_wait_payment' ||
                        orderTimingState(item) === 'preorder_wait_payment'
                    "
                    class="w-8"
                  >
                    {{ $tc('reserveCancelWarning', cancelReserveDays) }}<br>
                    <!--                    {{ $t('chooseDishesRecommendation') }}-->
                  </p>
                  <p
                    v-if="
                      orderTimingState(item) === 'preorder_choose_dishes' ||
                        orderTimingState(item) === 'preorder_cancel_time'
                    "
                    class="w-8"
                  >
                    {{ $tc('preorderEditCancelWarning', cancelReserveDays) }}
                  </p>
                  <p
                    v-if="orderTimingState(item) === 'reserve_timer'"
                    class="w-8"
                  >
                    {{ $t('waitOrder') }}<br>
                    <span class="red">{{ $t('reserveLastWarning') }}</span>
                  </p>

                  <p
                    v-if="
                      orderHasTimer(item) &&
                        orderTimingState(item) !== 'waiting_reserve'
                    "
                    class="w-8"
                  >
                    {{ $t('whatsOnTimer') }}
                  </p>
                </div>
              </div>

              <div
                class="about_button"
                :class="{ caution: orderHasCaution(item) }"
              >
                <button
                  class="eatme-btn-grey relative"
                  :class="{ caution: orderHasCaution(item) }"
                  @click="cancelOrder(item)"
                >
                  <label
                    v-if="orderHasCaution(item)"
                    class="caution-not-payable"
                    @click.stop
                  >
                    <img height="22" width="22" src="/icons/caution.svg">
                    <input :id="'caution' + item.id" class="caution-checkbox">
                    <span class="caution-message red">
                      {{ $t('cancelm1') }}
                      {{ $t('cancelm2') }}
                      {{ $t('selectCancelCause') }}
                    </span>
                  </label>

                  {{ $t('cancelOrder') }}
                </button>
                <button
                  v-if="orderTimingState(item) === 'wait_manager'"
                  class="eatme-btn-disabled"
                >
                  {{ $t('chooseDishes') }}
                </button>
                <button
                  v-if="
                    orderTimingState(item) === 'choose_dishes' ||
                      orderTimingState(item) === 'delivery_choose_dishes' ||
                      orderTimingState(item) === 'pickup_choose_dishes' ||
                      orderTimingState(item) === 'reserve_choose_dishes' ||
                      orderTimingState(item) === 'preorder_choose_dishes'
                  "
                  class="eatme-btn-colorful"
                  @click="
                    $router.push(
                      localePath({ path: `/catering/${item.catering_id}/menu` })
                    )
                  "
                >
                  {{ $t('chooseDishes') }}
                </button>
                <button
                  v-if="
                    orderTimingState(item) === 'pay_an_order' ||
                      orderTimingState(item) === 'delivery_pay_an_order' ||
                      orderTimingState(item) === 'pickup_pay_an_order' ||
                      orderTimingState(item) === 'reserve_wait_payment' ||
                      orderTimingState(item) === 'preorder_wait_payment'
                  "
                  class="eatme-btn-colorful"
                  @click="payOrder(item)"
                >
                  {{ $t('payOrder') }}
                </button>
                <button
                  v-if="orderTimingState(item) === 'pending_payment'"
                  class="eatme-btn-disabled"
                  @contextmenu="payOrder(item)"
                >
                  {{ $t('payOrder') }}
                </button>
                <button
                  v-if="
                    orderTimingState(item) === 'cooking_timer' ||
                      orderTimingState(item) === 'pickup_timer' ||
                      orderTimingState(item) === 'reserve_timer'
                  "
                  class="eatme-btn-red"
                  @click="buildTheWay(item)"
                >
                  {{ $t('buildWay') }}
                </button>
                <button
                  v-if="orderTimingState(item) === 'waiting_reserve'"
                  class="eatme-btn-red"
                  @click="chooseTables"
                >
                  {{ $t('chooseTables') }}
                </button>
              </div>
              <div
                v-if="
                  orderTimingState(item) === 'cooking_timer' ||
                    orderTimingState(item) === 'delivery_timer' ||
                    orderTimingState(item) === 'pickup_timer' ||
                    orderTimingState(item) === 'reserve_timer'
                "
                class="mt-1e w-9"
              >
                <p class="red mb-2">
                  {{ $t('ahtung') }} {{ $t('cancelm1') }}
                  {{ $t('cancelm2') }}
                  {{ $t('selectCancelCause1') }}
                  <u class="cursor-pointer" @click="cancelOrder(item)">
                    {{ $t('selectCancelCause2') }}
                  </u>
                </p>
              </div>
            </template>
            <template v-else>
              <div class="about_button">
                <button class="eatme-btn-colorful" @click="repeatOrder(item)">
                  {{ $t('repeatOrder') }}
                </button>

                <a
                  v-if="orderHasDownload(item)"
                  href="/images/billexample.png"
                  download
                  class="ml-5 downloadcheckicon cursor-pointer"
                >
                  <img
                    src="/icons/download_check1.svg"
                    height="26"
                    width="34"
                  >
                </a>
              </div>
              <p class="red w-6 desktop">
                {{ $t('someDishesCouldNotExist') }}
              </p>
              <p class="red w-9 mb-2 mobile">
                {{ $t('someDishesCouldNotExist') }}
              </p>
            </template>
          </div>
        </div>
        <!--Список блюд-->
        <div class="dishlist-wrap">
          <div
            v-if="item.order_items && item.order_items.length"
            class="dishlist wide"
            :class="{ 'text-right': item.order_items.length === 1 }"
          >
            <div
              v-for="(dish, i) in item.order_items"
              :key="i"
              class="order_dish_item_container"
              :class="{ border: isPreorder }"
            >
              <div class="order_dish_item">
                <header class="order_dish_item_header">
                  <img
                    :src="dish.img_path"
                    alt=""
                    class="order_dish_item_image"
                    @click="changeCurrentDish(dish, i)"
                  >
                </header>
                <article class="order_dish_item_body">
                  <h3 class="order_dish_item_title">
                    {{ dish.name }}
                  </h3>
                  <footer class="order_dish_item_footer">
                    <div class="order_dish_item_counter ml-1">
                      <div class="order_dish_item_count">
                        {{ dish.quantity }}
                      </div>
                    </div>
                    <p class="order_dish_item_price">
                      <span
                        class="nowrap"
                      ><span class="gilroy-bold">&#8381;</span>
                        {{ +dish.price }}</span>
                    </p>
                  </footer>
                </article>
              </div>
              <div v-if="isPreorder" class="order_dish_comment">
                <p v-if="dish.comment" class="text">
                  {{ dish.comment || '' }}
                </p>
                <p v-else class="text-placeholder">
                  {{ $t('placeholderComment') }}
                </p>
              </div>
            </div>
          </div>
          <div v-else class="w-9 mr-a ml-a">
            <template
              v-if="
                type === 'orders' &&
                  item.order_type !== 'reserve_table' &&
                  item.order_type !== 'pre_order'
              "
            >
              <p
                v-if="orderTimingState(item) === 'wait_manager'"
                class="emptyCart3 text-grey"
              >
                {{ $t('emptyCart3') }}
              </p>
              <p
                v-else-if="item.order_type === 'go_and_eat'"
                class="emptyCart1 green"
              >
                {{ $t('emptyCart1') }}
                <span
                  class="emptyCart1 underline"
                  @click="
                    $router.push(
                      localePath({ path: `/catering/${item.catering_id}/menu` })
                    )
                  "
                >{{ $t('emptyCart2') }}</span>
              </p>
              <p v-else class="emptyCart4 green">
                {{ $t('emptyCart4') }}
                <span
                  class="emptyCart4 underline"
                  @click="
                    $router.push(
                      localePath({ path: `/catering/${item.catering_id}/menu` })
                    )
                  "
                >{{ $t('emptyCart5') }}</span>
              </p>
            </template>
            <p
              v-else-if="orderTimingState(item) === 'reserve_choose_dishes'"
              class=" emptyCart4 green"
            >
              {{ $t('reserveEmptyCart') }}
              <span
                class="emptyCart4 underline"
                @click="
                  $router.push(
                    localePath({ path: `/catering/${item.catering_id}/menu` })
                  )
                "
              >
                {{ $t('emptyCart5') }}
              </span>
              .
            </p>
            <p
              v-else-if="orderTimingState(item) === 'preorder_choose_dishes'"
              class="emptyCart4 green"
            >
              {{ $t('emptyCart4') }}
              <span
                class="emptyCart4 underline"
                @click="
                  $router.push(
                    localePath({ path: `/catering/${item.catering_id}/menu` })
                  )
                "
              >{{ $t('emptyCart5') }}</span>
            </p>
            <p v-else class="emptyCart">
              {{ $t('emptyCart') }}
            </p>
          </div>
        </div>
      </div>
    </template>
    <template v-else>
      <p class="wide text-center green text-lg mt-1e">
        {{ $t('loadingText') }}
      </p>
    </template>

    <form-dish-popups
      v-if="currentDish"
      :current-dish.sync="currentDish"
      :prev-dish="prevDish"
      :next-dish="nextDish"
      :is-read-only="true"
      :quantity="dishesAmount"
      @prev-click="redirectToPrev"
      @next-click="redirectToNext"
    />

    <div v-if="errorPopupIsOpen" class="popup">
      <popup-error @close-popup="toggleErrorPopup">
        {{ $t('popupErrorMessage') }}
      </popup-error>
    </div>
    <div v-if="successPopupIsOpen" class="popup">
      <popup-success @close-popup="toggleSuccessPopup">
        {{ $t('popupSuccessMessage') }}
      </popup-success>
    </div>
    <div v-if="iS_ORDER_CANCEL_POPUP" class="popup">
      <popup-delete
        @close-popup="
          iS_ORDER_CANCEL_POPUP.decline && iS_ORDER_CANCEL_POPUP.decline()
        "
        @delete="
          iS_ORDER_CANCEL_POPUP.success && iS_ORDER_CANCEL_POPUP.success()
        "
      >
        {{ $t('popupCancelMessage') }}
      </popup-delete>
    </div>
    <popup-notification
      v-if="IS_ORDER_CANCEL_WHY_POPUP"
      @close-popup="
        IS_ORDER_CANCEL_WHY_POPUP.decline && IS_ORDER_CANCEL_WHY_POPUP.decline()
      "
    >
      <form-cancel-why :order="item" />
    </popup-notification>
  </section>
</template>

<script>
import { mapGetters } from 'vuex'

export default {
  props: {
    type: {
      type: String
    }
  },
  data () {
    return {
      item: {},
      catering: null,

      openComment: false,
      openDishesComment: false,

      vyr: false,
      cancelFormText: '',
      iS_ORDER_CANCEL_POPUP: null,

      carouselIsOpen: false,
      errorPopupIsOpen: false,
      successPopupIsOpen: false,
      currentActionDesktop: 'search',
      currentActionMobile: '',

      currentDish: null,
      prevDish: null,
      nextDish: null,
      dishesAmount: null,
      previewOpenData: false
    }
  },
  computed: {
    transactionDate () {
      const [date, time] = this.item.payment_created_at.split(' ')
      const [year, month, day] = date.split('-')
      const formattedYear = year.substr(2, 2)
      const formattedDate = `${day}.${month}.${formattedYear}`
      return `${formattedDate}, ${time}`
    },
    orderReadyTimeText () {
      return this.item.order_type === 'reserve_table'
        ? this.$t('reserveTimeMenuLabel')
        : this.$t('timeMenuLabel')
    },
    personQuantity () {
      if (this.isReserve || this.isPreorder) {
        if (this.reserveInfo && this.isTableReserved) {
          return this.item.person_quantity
        } else {
          return '...'
        }
      } else {
        return this.item.person_quantity
      }
    },
    isTableReserved () {
      return this.item.table_is_reserved
    },
    tablesRow () {
      if (!this.reserveInfo || !this.isTableReserved) {
        return '...'
      }

      const row = this.reserveInfo.tables
        .map(item => item.table_number)
        .join(', ')

      return row || '...'
    },
    occasion () {
      if (!this.reserveInfo || !this.isTableReserved) {
        return '...'
      }
      return this.reserveInfo.occasion || '...'
    },
    orderPrice () {
      return ~~(this.item.price * 100) / 100
    },
    preorderPrepayment () {
      return ~~(this.item.price * this.minPreorderPercent) / 100
    },
    readyDatetime () {
      if (
        (this.isPreorder || this.isReserve) &&
        (!this.reserveInfo || !this.isTableReserved)
      ) {
        return '...'
      }

      const date = this.readyDate(this.item)
      const time = this.readyTime(this.item)

      if (!date) {
        return '...'
      }

      const result = `${date}, ${time}`
      return result || '...'
    },
    comment () {
      const comment =
        this.reserveInfo && this.isTableReserved
          ? this.reserveInfo.comment
          : this.item.comment

      return comment || '...'
    },
    allDishesComment () {
      const comment =
        this.reserveInfo && this.isTableReserved
          ? this.item.all_dishes_comment
          : null

      return comment || '...'
    },
    reserveInfo () {
      return this.item.reserve
    },
    isReserve () {
      return this.item.order_type === 'reserve_table'
    },
    isPreorder () {
      return this.item.order_type === 'pre_order'
    },
    cancelReserveDays () {
      return this.catering?.cancel_reserve_days || 0
    },
    minPreorderPercent () {
      return this.catering?.min_preorder_percent || 0
    },
    var1: {
      get () {
        return this.cancelFormText === this.$t('var1')
      },
      set (s) {
        this.varYour = false
        this.cancelFormText = s ? this.$t('var1') : ''
      }
    },
    var2: {
      get () {
        return this.cancelFormText === this.$t('var2')
      },
      set (s) {
        this.varYour = false
        this.cancelFormText = s ? this.$t('var2') : ''
      }
    },
    var3: {
      get () {
        return this.cancelFormText === this.$t('var3')
      },
      set (s) {
        this.varYour = false
        this.cancelFormText = s ? this.$t('var3') : ''
      }
    },
    varYour: {
      get () {
        return this.vyr
      },
      set (s) {
        if (s) {
          this.var1 = false
          this.var2 = false
          this.var3 = false
        }
        this.vyr = s
      }
    },
    ...mapGetters([
      'IS_ORDER_CANCEL_WHY_POPUP',
      'PERSONAL_DATA',
      'IS_GOEATPOPUP'
    ])
  },
  watch: {
    async item () {
      await this.updateCatering()
    },
    systemTime (val) {
      if (val % 5 === 0) {
        this.reloadOrderBody()
      }
    }
  },
  created () {
    this.reloadOrderBody()
  },
  async mounted () {
    await this.updateCatering()
  },
  methods: {
    async updateCatering () {
      if (!this?.item?.catering_id) {
        return
      }
      this.catering = await this.$database.catering.getById(
        this.item.catering_id
      )
    },
    chooseTables () {
      const orderId = this.item.id
      const path = this.localePath({ path: `/ordering/${orderId}/reservation` })
      this.$router.push(path)
    },
    isPromoDish (dish) {
      return dish.id % 3 === 0
    },
    previewImg (value) {
      this.previewOpenData = value || null
    },
    async redirectToPrev () {
      if (this.prevDish === null) {
        return
      }

      const index = this.item.order_items.findIndex(
        item => +item.item_id === +this.prevDish
      )
      await this.changeCurrentDish(this.item.order_items[index], index)
    },
    async redirectToNext () {
      if (this.nextDish === null) {
        return
      }

      const index = this.item.order_items.findIndex(
        item => +item.item_id === +this.nextDish
      )
      await this.changeCurrentDish(this.item.order_items[index], index)
    },
    clearCurrentDish () {
      this.currentDish = null
      this.prevDish = null
      this.nextDish = null
    },
    closeDishPopup () {
      this.clearCurrentDish()
    },
    async changeCurrentDish (dish, index) {
      if (!dish) {
        this.clearCurrentDish()
        return
      }

      const cookiz = this.$cookies
      const categoryId = dish.category_id
      const cateringId = this.item.catering_id
      const dishId = dish.item_id
      const { data } = await this.$store.dispatch('GET_CURRENT_DISH', {
        cookiz,
        cateringId,
        categoryId,
        dishId
      })

      this.currentDish = data.item
      this.dishesAmount = this.item.order_items[index].quantity
      this.prevDish =
        index > 0 ? this.item.order_items[index - 1].item_id : null
      this.nextDish =
        index < this.item.order_items.length - 1
          ? this.item.order_items[index + 1].item_id
          : null
    },
    shortComment (s) {
      const text = s
      const ar = text.split(' ')
      let nt = ''
      let buff = ''
      for (let i = 0; i < ar.length; i++) {
        buff = nt + ar[i]
        if (buff.length < 100) {
          nt += ar[i] + ' '
        } else {
          break
        }
      }
      return nt
    },
    reloadOrderBody () {
      const cookiz = this.$cookies
      const orderID = this.$route.params.id
      if (orderID) {
        try {
          this.$store
            .dispatch('GET_ORDER', { cookiz, orderID })
            .then((data) => {
              this.item = data.order
              if (!this.item) {
                throw data
              }
              if (
                this.item.status === 'finished' ||
                this.item.status === 'canceled'
              ) {
                if (~this.$route.path.indexOf('orders')) {
                  this.$router.replace(this.localePath('/orders'))
                }
              }
            })
            .catch((err) => {
              if (~this.$route.path.indexOf('orders')) {
                this.$router.replace(this.localePath('/orders'))
              }
              console.warn(
                'reloadOrderBody GET_ORDER',
                err,
                ' Order ID: ',
                orderID
              )
            })
        } catch (err) {
          console.warn(
            'catch reloadOrderBody GET_ORDER',
            err,
            ' Order ID: ',
            orderID
          )
          if (~this.$route.path.indexOf('orders')) {
            this.$router.replace(this.localePath('/orders'))
          }
        }
      } else {
        console.warn(
          'reloadOrderBody Empty orderID',
          orderID,
          ' Order ID: ',
          orderID
        )
      }
      this.reloadAllUserOrders()
    },
    cancelOrder (itm) {
      const hasCaution = this.orderHasCaution(this.item)
      const timing = this.orderTimingState(this.item)

      const cookiz = this.$cookies
      const order = itm
      const vm = this

      if (hasCaution) {
        this.$store.commit('SET_ORDER_CANCEL_WHY_POPUP', {
          timing,
          success (reason) {
            vm.$store
              .dispatch('CANCEL_ORDER', { cookiz, order, reason })
              .then(() => {
                vm.$store.commit('SET_ORDER_CANCEL_WHY_POPUP', null)
                vm.setOrder(null)
                vm.$router.replace(vm.localePath({ path: `/${vm.type}/` }))
              })
            return true
          },
          decline () {
            vm.$store.commit('SET_ORDER_CANCEL_WHY_POPUP', null)
            return false
          }
        })
      } else {
        this.iS_ORDER_CANCEL_POPUP = {
          success (reason) {
            vm.$store
              .dispatch('CANCEL_ORDER', { cookiz, order, reason })
              .then(() => {
                vm.iS_ORDER_CANCEL_POPUP = null
                vm.setOrder(null)
                vm.$router.replace(vm.localePath({ path: `/${vm.type}/` }))
              })
            return true
          },
          decline () {
            vm.iS_ORDER_CANCEL_POPUP = null
            return false
          }
        }
      }
    },

    toggleErrorPopup () {
      this.errorPopupIsOpen = !this.errorPopupIsOpen
    },
    toggleSuccessPopup () {
      this.successPopupIsOpen = !this.successPopupIsOpen
    }
  }
}
</script>

<style lang="scss" scoped>
@import '~/assets/styles/abstract/var';

.emptyCart,
.emptyCart3 {
  color: #c4c4c4;
}

.downloadcheckicon.absol {
  position: absolute;
  top: 30%;
  right: 0;
}
.downloadcheckicon {
  width: 36px;
  height: 36px;
  border-radius: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ffffff 0% 0% no-repeat padding-box;
  box-shadow: 0px 4px 8px #c4c4c412;
  border: 2px solid #a09fa1;
  cursor: pointer;
}
.downloadcheckicon.disabled-check {
  border: 2px solid #efefef;
}
.caution-not-payable {
  text-align: right;
  position: absolute;
  top: -1.5rem;
  right: -1.8em;
  // width: 100%;
}
button {
  white-space: unset !important;
}
.caution-message {
  display: none;
  position: absolute;
  left: 0;
  top: -11rem;
  width: 200px;
  padding: 9px;
  box-shadow: 6px 3px 6px #00000029;
  border: 1px solid #f3bd44;
  border-radius: 4px;
  background: white;
  text-align: center;
  font-size: 14px;
  white-space: unset !important;
}
.caution-checkbox {
  position: absolute;
  width: 0;
  height: 0;
  top: 0;
  right: 0;
}
.caution-checkbox:focus + .caution-message,
.caution-checkbox:hover + .caution-message {
  display: block !important;
}

@media screen and (max-width: 991px) {
  .amsd1 {
    margin-top: 2rem;
    margin-left: 1rem !important;
  }
  .main_body {
    height: auto !important;
  }
  .orders_item_form {
    overflow: initial !important;
  }
  .order_dish_item_header {
    width: 24rem;
    border-radius: 6px;
    overflow: hidden;
    height: 100%;
    max-height: 100px;
  }
  .order_dish_item_body {
    width: 100%;
  }
  .orders_item_form {
    flex-direction: column;
  }
  .order_dish_item {
    height: 100px !important;
    width: 100%;
  }
}

.orders {
  &-back {
    position: absolute;
    top: 10px;
    left: 10px;
  }
}

.main_menu {
  flex: auto !important;
}

.menucontainernew {
  grid-area: menu !important;
  display: flex !important;
  flex-direction: column !important;
}

.orders_main_list_container {
  overflow: auto;
}

@media screen and (max-width: 991px) {
  .chgoeat.lbbnt {
    width: 40% !important;
    text-align: left !important;
  }
}
@media screen and (max-width: 991px) {
  .main_body {
    min-height: 100vh;
    min-height: calc(var(--vh) * 100);
    height: auto;
  }
}

.amsd1 {
  margin-left: 2.2rem;

  .transaction {
    width: 83%;
    word-break: break-all;
  }

  @media screen and (min-width: 1080px) {
    margin-left: 4.2rem;
  }
}

.order-details-block {
  margin-top: 2rem;
}

.myordersCrumb {
  color: #ccc;
}

.order-about-icon-cart {
  padding: 5px;
  width: 32px;
  height: 32px;
  border: 1px solid $c-green;
  border-radius: 999px;
}

.about_button {
  display: flex;
  margin: 2rem 0;

  &.caution {
    margin-top: 3rem;
  }

  .downloadcheckicon {
    margin-left: 1rem !important;
  }

  button {
    white-space: nowrap;

    // &:not(:first-child) {
    //   margin-left: 80px;
    // }
  }

  @media screen and (min-width: 1530px) {
    flex-direction: row;

    button:not(:first-child) {
      margin-left: 80px;
    }
  }
  @media screen and (min-width: 992px) and (max-width: 1529px) {
    flex-direction: column;
    justify-content: center;
    align-items: center;

    &.caution {
      margin-top: 2rem;
    }

    button {
      margin-bottom: 1rem;

      &:not(:first-child) {
        margin-left: 0;
      }
    }

    .eatme-btn-grey {
      order: 2;

      &.caution {
        margin-top: 2rem;
      }
    }
  }
  @media screen and (max-width: 992px) {
    flex-direction: row;

    button:not(:first-child) {
      margin-left: 80px;
    }
  }
  @media screen and (max-width: 460px) {
    flex-direction: column;
    justify-content: center;
    align-items: center;

    &.caution {
      margin-top: 2rem;
    }

    button:not(:first-child) {
      margin-bottom: 1rem;
      margin-left: 0;
    }
    .eatme-btn-grey {
      order: 2;

      &.caution {
        margin-top: 2rem;
      }
    }
    .downloadcheckicon {
      margin-top: 1rem;
    }
  }
}

.dishlist {
  text-align: right;
  height: auto;
  @media screen and (min-width: 1600px) {
    text-align: left;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
  }

  &-wrap {
    width: 100%;
    @media screen and (min-width: 992px) and (max-width: 1150px) {
      width: 70%;
    }
  }
}
.dishlist.text-right {
  text-align: right !important;
  @media screen and (max-width: 991px) {
    text-align: left !important;
  }
}

.dishlist_item {
  position: relative;
  display: flex;
  align-items: center;
}
.dishlist_item_img {
  position: relative;
  overflow: hidden;
  width: 14rem;
  height: 5.5rem;
  margin-right: 2rem;
  img {
    object-fit: cover;
    width: 100%;
    height: 100%;
  }
}
.dishlist_item_name {
  width: 100%;
}
.dishlist_item_count,
.dishlist_item_price {
  width: 6em;
}

.summary,
.destination {
  margin-bottom: 2rem;
}

.summary,
.dishlist_item_price {
  font-family: $ff-roboto;
  font-weight: 900;
  color: $c-green;
}

.orders_item_form {
  font-size: 14px;
  padding: 1rem;
  width: 100%;

  padding: 0;
  height: 100%;
  overflow: auto;
}
.orders_item_form > div {
  height: 100%;
  overflow: auto;
  overflow-x: hidden;
}

.about_head {
  width: 100%;
  margin-top: 1rem;
  font-size: 16px;
  padding-bottom: 1rem;
  margin-bottom: 1rem;
  border-bottom: 1px solid #e2e2e2;
}
.title {
  margin-bottom: 4px;
  font-size: 14px;
  font-weight: bold;
  font-family: $ff-roboto;
}
.about_head_inliner {
  display: flex;
  justify-content: space-between;
}

.about_body {
  width: 100%;
  display: flex;
  padding: 1rem 0 0;

  .roboto {
    display: grid;
    grid-template-columns: 32px auto auto;
    grid-column-gap: 10px;
    align-items: center;
  }
}

.idlabel,
.address {
  color: #555;
}
.address {
  display: flex;
  font-size: 14px;
}
.address > img {
  margin-right: 1rem;
}

.emptyorders_image::after {
  position: absolute;
  top: 1rem;
  right: 1rem;

  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2.25rem;
  font-weight: bold;
  content: '+';
  color: $c-green;
  border-radius: 50%;
  width: 2.5rem;
  height: 2.5rem;
  background: white;
  box-shadow: 0px 3px 9px #ececec;
}
.emptyorders_image {
  position: relative;
  border: 2px solid $c-line;
  border-radius: 4px;
  width: 200px;
  height: 200px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: auto;
  margin-bottom: 1rem;
  img {
    width: 90%;
  }
}
.emptyorders_text {
  font-size: 16px;
  margin-top: 10rem;
}

.order {
  position: relative;
  padding: 1rem 2rem 30px 2rem;
  justify-items: center;
  border-radius: 0;
  background-color: $c-light;
  height: 100%;

  display: flex;
  flex-direction: column;

  @media screen and (max-width: 991px) {
    min-height: 100vh;
    min-height: calc(var(--vh) * 100);
  }
  @media screen and (min-width: 992px) {
    border-radius: $br-block-desktop;
    width: 69%;
    padding-right: 1rem;
  }
  @media screen and (min-width: 1080px) {
    padding-right: 2rem;
  }

  &-back {
    position: absolute;
    top: 10px;
    left: 10px;

    @media screen and (min-width: 992px) {
      display: none;
    }

    & /deep/ {
      .link-back {
        font-size: 14px;

        &-icon {
          flex: 0 0 15px;
          width: 15px;
          height: 10px;
        }
      }
    }
  }

  &_header {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  &-title {
    font-family: $ff-roboto;
    font-size: 22px;
    font-weight: bold;
    color: $c-green;

    @media screen and (min-width: 992px) {
      color: $c-primary;
    }
  }

  &_info {
    display: flex;
    font-family: $ff-gilroy;
    font-size: 20px;
    color: $c-green;

    @media screen and (min-width: 992px) {
      font-size: 14px;
      color: $c-primary;
    }
  }

  &-phone {
    display: none;
    margin-left: 10px;

    @media screen and (min-width: 992px) {
      display: inline-block;
    }
  }

  &_form {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    width: 100%;
    overflow: auto;

    @media screen and (min-width: 992px) {
      position: relative;
      border: {
        width: 1px;
        style: solid;
        color: $c-line;
        radius: 6px;
      }
    }
  }
}

.order_dish_item {
  display: inline-flex;
  flex-direction: row;
  width: 50%;
  min-width: 24rem;
  height: 100px;
  border-width: 1px;
  border-style: solid;
  border-color: #e2e2e2;
  border-radius: 5px;
  overflow: hidden;
  margin: 0 1% 0.5rem 0;
}
@media screen and (min-width: 992px) {
  .order_dish_item {
    flex-direction: column;
    grid-template-columns: 100%;
    grid-template-rows: 60% 40%;
    grid-column-gap: 0;
    height: auto;
    min-width: 20rem !important;
  }
}
@media screen and (min-width: 1150px) {
  .order_dish_item {
    min-width: 24rem !important;
  }
}
@media screen and (min-width: 1600px) {
  .order_dish_item {
    // width: 95%;
    // margin: 0 0 10px auto;
  }
}
.order_dish_item_header {
  position: relative;
  height: 144px;
}
.order_dish_item_image {
  width: 100%;
  height: 100%;
  -o-object-fit: cover;
  object-fit: cover;
  cursor: pointer;
}
.order_dish_item_body {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
  padding: 5px 10px 0;
  background-color: #fff;
}

.order_dish_item {
  margin: -1px;
  width: calc(100% + 2px);
}
.order_dish_item_body {
  flex-grow: 1;
}
.order_dish_item_container {
  width: 95%;
  margin: 0 auto 15px;

  &.border {
    border: {
      width: 1px;
      style: solid;
      color: $c-line;
      radius: 5px;
    }
  }
  .order_dish_item_title {
    line-height: 20px;
    -webkit-line-clamp: 3;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: 60px;
  }
}
.order_dish_comment {
  padding: 9px;
  font-size: 12px;
  line-height: 14px;
  text-align: left;

  .text-placeholder {
    color: #a5a5a5;
  }
}
.order_dish_item_title {
  position: relative;
  font-family: 'Gilroy-Light', sans-serif;
  font-size: 14px;
  font-weight: 300;
  color: #111;
}
@media screen and (max-width: 991px) {
  .order_dish_item_container {
    width: 100%;
  }
  .order_dish_item_title {
    margin: 0;
    -webkit-line-clamp: 3;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-align: left;
    line-height: 18px !important;
    min-height: 44px !important;
  }
}
.order_dish_item_footer {
  display: grid;
  grid-template-columns: 3fr 2fr;
  grid-column-gap: 5px;
  align-items: center;
}
.order_dish_item_counter {
  display: flex;
  align-items: center;
}
.order_dish_item_count {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background-image: url(/icons/catering/new/dinner-grey.svg);
  background-repeat: no-repeat;
  background-size: cover;
  font-family: 'Roboto Slab', serif;
  font-weight: bold;
  font-size: 14px;
  color: #111;
}
.order_dish_item_price {
  font-family: 'Roboto Slab', serif;
  font-weight: bold;
  font-size: 16px;
  color: #21bc96;
}
@media screen and (min-width: 992px) {
  .order_dish_item_price {
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
  .order_dish_item_price svg {
    margin-right: 4px;
  }
}
</style>

<style>
@media screen and (max-width: 991px) {
  .dishImagePopup .popup__content {
    display: flex;
  }
}
.order_page .default_popup .popup {
  overflow: initial !important;
}
</style>
